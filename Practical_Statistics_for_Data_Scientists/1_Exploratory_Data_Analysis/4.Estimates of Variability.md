# 변이 추정

**변이**는 데이터 값이 얼마나 밀집해 있는지 혹은 퍼져 있는지를 나타내는 산포도를 나타낸다. 변이를 측정하고, 이를 줄이고, 실제 변이와 랜덤을 구분하고, 실제 변이의 다양한 요인들을 알아보고, 변이가 있는 상황에서 결정을 내리는 등, 통계의 핵심에 이 변이가 있다.

- 분산과 표준편차는 가장 보편적으로 널리 사용되는 변이 측정 방법이다.
- 이들 모두 특잇값에 민감하다.
- 중간값과 백분위수(분위수)로부터 평균절대편차와 중간값의 중위절대편차를 구하는 것이 좀 더 로버스트하다.

목차

- [표준편차와 관련 추정값들](#표준편차와-관련-추정값들)
- [백분위수에 기초한 추정](#백분위수에-기초한-추정)
- [예제](#예제)
  - [주별 인구의 변이 추정](#주별-인구의-변이-추정)
- [더 읽을 거리](#더-읽을-거리)

## 표준편차와 관련 추정값들

분산, 표준편차, 평균절대편차 모두 특잇값과 극단값에 로버스트하지 않다.  
특히 분산과 표준편차는 제곱편차를 사용하기 때문에, 특잇값에 민감하다.

여기서 로버스트한 변이 추정값으로는 중간값의 중위절대편차(MAD)가 있다.  
**중위절대편차**는 중간값과의 편차의 절댓값의 중간값  
중위절대편차 = 중간값($\vert x_1 - m\vert, \vert x_2 - m\vert, ..., \vert x_N - m\vert$)

### 편차

**편차**는 관측값과 위치 추정값 사이의 차이  
가장 대표적으로 사용되는 변이 추정들은 관측 데이터와 위치 추정값 사이의 차이, 즉 편차를 기본으로 한다. 이러한 편차는 데이터가 중앙값을 주변으로 얼마나 퍼져 있는지 말해준다.

변이를 측정하는 한 가지 방법은 바로 이러한 편차들의 대푯값을 추정하는 것이다. 그렇다고 편차 자체의 평균을 구하면 음의 편차가 양의 편차를 상쇄해서 바람직하지 않다.  
대신 사용할 수 있는 간단한 방법은 편차의 절댓값의 평균을 구하는 것이다. 이를 **평균절대편차**라고 한다.

### 평균절대편차

**평균절대편차**는 평균과의 편차의 절댓값의 평균  
평균절대편차 = $\frac{\sum^n_{i=1}\vert{x_i - \bar x}\vert}{n}$  
_여기서 $\bar x$는 표본평균을 의미한다_

### 분산과 표준편차

**분산**은 평균과의 편차를 제곱한 값들의 합을 n-1로 나눈 값. n은 데이터 개수  
**표준편차**는 분산의 제곱

가장 유명한 변이 추정 방법은 제곱편차를 이용하는 분산과 표준편차이다. 분산은 제곱편차의 평균이고 표준편차는 분산의 제곱근이다.  
분산 = $s^2$ = $\frac{\sum^n_{i=1}({x_i - \bar x})^2}{n-1}$  
표준편차 = s = $\sqrt{분산}$

표준편차는 원래 데이터와 같은 척도(scale)에 있기 때문에 분산보다 훨씬 해석하기가 쉽다.

표준편차는 수식이 복잡해보이는데도 통계학에서 평균절대편차보다 선호한다. 수학적으로 제곱한 값이 절댓값보다 통계 모델을 다루는데 더 편리하다는 통계 이론이 이를 뒷받침한다.

#### 자유도 n 아니면 n-1?

일단 표본을 가지고 모집단을 추정하고자 한다는 전제를 기본으로 하자.

만약 분산 수식에 n을 분모로 사용한다면, 모집단의 분산과 표준편차의 참값을 과소평가하게 된다. 이를 **편향 추정**이라고 부른다. 하지만 n-1로 나누면 **비편향 추정**이된다.

그렇다면 왜 n을 사용하는 게 편향 추정이 될까?  
추정값을 계산할 때 제약조건의 개수를 의미하는 **자유도**가 있다.  
따라서 표준편차는 표본의 평균에 따른다는 하나의 제약 조건을 가지고 있기 때문에 n-1의 자유도를 갖는다.

## 백분위수에 기초한 추정

**백분위수**는 어떤 값들의 P퍼센트가 이 값 혹은 더 작은 값을 갖고, (100 - P)퍼센트가 이 값 혹은 더 큰 값을 갖도록 하는 값

변이를 추정하는 또 다른 접근은 정렬된 데이터가 얼마나 퍼져 있는지를 보는 것이다. 이때, 최소에서 최대까지 정렬된 데이터 값이 따른 계량형 즉, 정렬 데이터를 나타내는 통게량을 **순서통계량**이라고 부른다.  
여기서 가장 기본이되는 측도는 가장 큰 값과 작은 값의 차이를 나타내는 **범위**이다.  
최대 최솟값 자체가 특잇값을 분석하는 데 큰 도움을 준다. 그렇지만 이 범위는 특잇값에 매우 민감하며 데이터의 변이를 측정하는 데 그렇게 유용하지는 않다.

그래서 특잇값에 민감한 것을 피해 범위의 양 끝에서 값들을 지우고 범위를 다시 알아볼 수도 있다. 이 방식으로 변이를 측정하는 가장 대표적인 방법은 **사분위범위(IQR)**라는, 25번째 백분위수와 75번째 백분위수의 차이를 보는 것이다.  
또한, 데이터 집합이 매우 클 경우, 정확한 백분위수를 계산하기 위해 모든 값을 정렬하는 것은 매우 많은 연산을 필요로 한다. 따라서 머신러닝과 통계 소프트웨어에서는 백분위수의 근삿값을 사용한다. 이러한 근사 방법은 계산이 매우 빠르고 어느 정도의 정확도를 보장한다.

## 예제

### 주별 인구의 변이 추정

[Jupyter](./4.3%20%EC%98%88%EC%A0%9C.ipynb)

## 더 읽을 거리

[백분위 섹션 - 데이비드 레인](https://onlinestatbook.com/2/introduction/percentiles.html)
[중간값에서 편차와 로버스트한 특징 - 케빈 데이븐포트](https://www.r-bloggers.com/2013/08/absolute-deviation-around-the-median/)
